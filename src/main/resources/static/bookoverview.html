<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bücherübersicht</title>
  <link rel="stylesheet" href="css/style.css"> <!-- Verknüpft die CSS-Datei -->
</head>
<body>

<header>
  <div class="burger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="unsichtbar">
    <ul>
      <li><a href="profile.html">Profil</a></li>
      <li><a href="registration_form.html">Registrieren</a></li>
      <li><a href="index.html">Abmelden</a></li>
    </ul>
  </div>
  <h1>Bücherübersicht</h1>
</header>

<main>
  <section id="books">
    <!-- Buttons zum Bearbeiten und Hinzufügen -->
    <div class="button-container">
      <button id="hinzufuegen-btn">Hinzufügen</button>
    </div>

    <!-- Sortier- und Filterbereich -->
    <div class="sort-filter-container">
      <!-- Sortieren -->
      <div>
        <label for="sortieren">Sortieren nach:</label>
        <select id="sortieren">
          <option value="name">Name (A-Z)</option>
          <option value="name-reversed">Name (Z-A)</option>
        </select>
        <button onclick="sortBooks()">Sortieren</button>
      </div>

      <!-- Filtern -->
      <div>
        <label for="filter-kriterium">Filtern nach:</label>
        <select id="filter-kriterium">
          <option value="isbn">ISBN</option>
          <option value="name">Name</option>
          <option value="autor">Autor</option>
          <option value="genre">Genre</option>
          <option value="verfuegbarkeit">Verfügbarkeit</option>
        </select>
        <label for="filter-wert">Wert:</label>
        <input type="text" id="filter-wert" placeholder="Filterwert eingeben">
        <button onclick="filterBooks()">Filtern</button>
      </div>
    </div>

    <!-- Formular zum Hinzufügen/Bearbeiten von Büchern -->
    <div class="form-container" id="form-container">
      <input type="hidden" id="edit-index" value="">
      <label for="isbn">ISBN:</label>
      <input type="text" id="isbn" required>
      <label for="name">Name:</label>
      <input type="text" id="name" required>
      <label for="autor">Autor:</label>
      <input type="text" id="autor" required>
      <label for="genre">Genre:</label>
      <input type="text" id="genre" required>
      <label for="verfuegbarkeit">Verfügbarkeit:</label>
      <input type="text" id="verfuegbarkeit" required>
      <button id="submit-btn">Buch hinzufügen</button>
    </div>

    <!-- Tabelle zur Anzeige der Bücher -->
    <table>
      <thead>
      <tr>
        <th>ISBN</th>
        <th>Name</th>
        <th>Autor</th>
        <th>Genre</th>
        <th>Verfügbarkeit</th>
        <th>Aktionen</th>
      </tr>
      </thead>
      <tbody id="book-table-body">
      <!-- Hier kommen die Buchdaten -->
      </tbody>
    </table>
  </section>
</main>

<footer>
  <p>&copy; 2024 Bibliotheksverwaltung</p>
</footer>

<script>
  let editMode = false;
  let currentEditIndex = null;

  const hinzufuegenBtn = document.getElementById('hinzufuegen-btn');
  const bearbeitenBtn = document.getElementById('bearbeiten-btn');
  const formContainer = document.getElementById('form-container');
  const submitBtn = document.getElementById('submit-btn');
  const bookTableBody = document.getElementById('book-table-body');

  hinzufuegenBtn.addEventListener('click', () => {
    formContainer.style.display = formContainer.style.display !== 'block' ? 'block' : 'none';
    resetForm();
  });

  submitBtn.addEventListener('click', (event) => {
    event.preventDefault();

    const isbn = document.getElementById('isbn').value;
    const name = document.getElementById('name').value;
    const autor = document.getElementById('autor').value;
    const genre = document.getElementById('genre').value;
    const verfuegbarkeit = document.getElementById('verfuegbarkeit').value;

    if (editMode) {
      const row = document.querySelector(`#book-table-body tr[data-index="${currentEditIndex}"]`);
      row.innerHTML = `
        <td>${isbn}</td>
        <td>${name}</td>
        <td>${autor}</td>
        <td>${genre}</td>
        <td>${verfuegbarkeit}</td>
        <td class="action-buttons">
          <button class="edit-btn" onclick="editBook(${currentEditIndex})">Bearbeiten</button>
          <button class="delete-btn" onclick="deleteBook(${currentEditIndex})">Löschen</button>
        </td>
      `;
      resetForm();
    } else {
      const newRow = document.createElement('tr');
      const newIndex = bookTableBody.rows.length;
      newRow.setAttribute('data-index', newIndex.toString());
      newRow.innerHTML = `
        <td>${isbn}</td>
        <td>${name}</td>
        <td>${autor}</td>
        <td>${genre}</td>
        <td>${verfuegbarkeit}</td>
        <td class="action-buttons">
          <button class="edit-btn" onclick="editBook(${newIndex})">Bearbeiten</button>
          <button class="delete-btn" onclick="deleteBook(${newIndex})">Löschen</button>
        </td>
      `;
      bookTableBody.appendChild(newRow);
      resetForm();
    }
  });

  function sortBooks() {
    const sortierenNach = document.getElementById('sortieren').value;
    const rows = Array.from(bookTableBody.rows);

    rows.sort((a, b) => {
      // wir sortieren immer nach Name
      const aText = a.cells[1].innerText.toLowerCase();
      const bText = b.cells[1].innerText.toLowerCase();

      return aText.localeCompare(bText);
    });

    if (sortierenNach === 'name-reversed') {
      rows.reverse();
    }

    rows.forEach(row => bookTableBody.appendChild(row));
  }

  function filterBooks() {
    const kriterium = document.getElementById('filter-kriterium').value;
    const filterWert = document.getElementById('filter-wert').value.toLowerCase();
    const columnIndex = { isbn: 0, name: 1, autor: 2, genre: 3, verfügbarkeit: 4, abgabedatum: 5 }[kriterium];

    Array.from(bookTableBody.rows).forEach(row => {
      const cellValue = row.cells[columnIndex].innerText.toLowerCase();
      row.style.display = cellValue.includes(filterWert) ? '' : 'none';
    });
  }

  function editBook(index) { /*...*/ }
  function deleteBook(index) { /*...*/ }
  function resetForm() { /*...*/ }


  // Hamburger Menü-Logik
  const burger = document.querySelector(".burger");
  const offScreenMenu = document.querySelector(".unsichtbar");

  burger.addEventListener("click", () => {
    burger.classList.toggle("active"); // Aktiviert oder deaktiviert die 'active'-Klasse beim Burger-Icon
    offScreenMenu.classList.toggle("active"); // Aktiviert oder deaktiviert die 'active'-Klasse beim Menü
  });

</script>

</body>
</html>
